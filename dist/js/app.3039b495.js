(function(){"use strict";var e={3266:function(e,t,a){var i=a(5471),n=function(){var e=this,t=e._self._c;return t("div",{class:{"theme-dark":e.darkTheme},attrs:{id:"app"}},[t("header",{staticClass:"app-header"},[t("h1",{staticClass:"ui header"},[e._v(" GeoNames Vue")]),e._m(0),t("button",{staticClass:"theme-toggle",attrs:{type:"button","aria-label":e.darkTheme?"Use light theme":"Use dark theme"},on:{click:e.toggleTheme}},[t("i",{class:e.darkTheme?"sun icon":"moon icon"}),t("span",[e._v(e._s(e.darkTheme?"Light theme":"Dark theme"))])])]),t("div",{staticClass:"search-section"},[t("label",{staticClass:"search-label",attrs:{for:"geonames-search"}},[e._v("Search city and state")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],staticClass:"search-input",attrs:{id:"geonames-search",type:"search",placeholder:"Type city or state name...",autocomplete:"off","aria-label":"Search city and state"},domProps:{value:e.searchQuery},on:{input:function(t){t.target.composing||(e.searchQuery=t.target.value)}}})]),t("h3",{staticClass:"ui header"},[e._v("<GeoNames-State>")]),t("state-table",{key:"state-"+e.searchQuery,attrs:{"search-query":e.searchQuery}}),t("h3",{staticClass:"ui header"},[e._v("<GeoNames-City>")]),t("city-table",{key:"city-"+e.searchQuery,attrs:{"search-query":e.searchQuery}})],1)},r=[function(){var e=this,t=e._self._c;return t("p",[e._v(" Example display of data from the "),t("a",{attrs:{href:"https://github.com/mariojrrc/geonames-api-node",target:"_blank"}},[e._v("GeoNames API Node")])])}],s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("vuetable",{ref:"vuetable",attrs:{"http-fetch":e.getData,fields:e.fields,"sort-order":e.sortOrder,"query-params":e.makeQueryParams,"data-path":"data","per-page":e.perPage,transform:e.transformData,"pagination-path":"pagination"},on:{"vuetable:pagination-data":e.onPaginationData,"vuetable:loading":e.onLoading}}),t("div",{staticClass:"pagination ui basic segment grid"},[t("vuetable-pagination-info",{ref:"paginationInfo",attrs:{"info-template":"Showing {from} to {to} of {total} items","no-data-template":"No data to display"}}),t("vuetable-pagination",{ref:"pagination",on:{"vuetable-pagination:change-page":e.onChangePage}})],1)],1)},o=[],l=(a(4114),a(291)),d=a(810),h=a(1824),c={name:"StateTable",components:{Vuetable:l.A,VuetablePagination:d.A,VuetablePaginationInfo:h.A},props:{searchQuery:{type:String,default:""}},data(){return{fields:[{name:"name",title:'<i class="grey address card outline icon"></i>Name',width:"20%",sortField:"name"},{name:"shortName",title:'<i class="grey address book outline icon"></i>Abbreviation',width:"20%"},{name:"createdAt",title:'<i class="grey clock outline icon"></i>Created at',width:"20%"},{name:"updatedAt",title:'<i class="grey clock outline icon"></i>Updated at',width:"20%"}],sortOrder:[{field:"Name",direction:"asc"}],perPage:10,apiUrl:"http://localhost:3000",basicAuth:"Basic NDAxNTU3Y2YtY2Q1OS00MTBlLTlkNTUtOGJhNzk2OTU1ZjVjOmI3ZmZlYjVmZjBhMTQ0NTNmZTcyNWY4Mjc3NTMyODk3ZTQ0MzdhMTQ="}},methods:{getData(e,t){return this.$http.defaults.baseURL=this.apiUrl+"/v1/state",this.$http.defaults.headers.common["Authorization"]=this.basicAuth,this.$http.get(e,t)},makeQueryParams(e,t,a){const i={sort:e[0].field,order:"asc"===e[0].direction?1:-1,page:t,pageSize:a,_count:1};return this.searchQuery&&this.searchQuery.trim()&&(i.q=this.searchQuery.trim()),i},transformData(e){const t={};t.pagination={total:e._total_items,per_page:e._embedded.states.length,current_page:e._page,last_page:e._page_count,next_page_url:((e._links||{}).next||{}).href||null,prev_page_url:((e._links||{}).last||{}).href||null,from:1===e._page?1:(e._page-1)*this.perPage,to:1===e._page?e._embedded.states.length:(e._page-1)*this.perPage+e._embedded.states.length},t.data=[];for(var a=0;a<e._embedded.states.length;a++)t.data.push({id:e._embedded.states[a].id,name:e._embedded.states[a].name,shortName:e._embedded.states[a].shortName,createdAt:this.$moment(e._embedded.states[a].createdAt).format("HH:mm:ss DD/MM/YYYY"),updatedAt:this.$moment(e._embedded.states[a].updatedAt).format("HH:mm:ss DD/MM/YYYY")});return t},onPaginationData(e){this.$refs.pagination.setPaginationData(e),this.$refs.paginationInfo.setPaginationData(e)},onChangePage(e){this.$refs.vuetable.changePage(e)},onLoading(){console.log("loading... show your spinner here")}}},u=c,m=a(1656),p=(0,m.A)(u,s,o,!1,null,null,null),g=p.exports,f=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("vuetable",{ref:"vuetable",attrs:{"http-fetch":e.getData,fields:e.fields,"sort-order":e.sortOrder,"query-params":e.makeQueryParams,"data-path":"data","per-page":e.perPage,transform:e.transformData,"pagination-path":"pagination"},on:{"vuetable:pagination-data":e.onPaginationData}}),t("div",{staticClass:"pagination ui basic segment grid"},[t("vuetable-pagination-info",{ref:"paginationInfo",attrs:{"info-template":"Showing {from} to {to} of {total} items","no-data-template":"No data to display"}}),t("vuetable-pagination",{ref:"pagination",on:{"vuetable-pagination:change-page":e.onChangePage}})],1)],1)},b=[],y=(a(8111),a(1701),{name:"CityTable",components:{Vuetable:l.A,VuetablePagination:d.A,VuetablePaginationInfo:h.A},props:{searchQuery:{type:String,default:""}},data(){return{fields:[{name:"name",title:'<i class="grey address card outline icon"></i>Name',width:"20%",sortField:"name"},{name:"stateName",title:'<i class="grey address book outline icon"></i>State',width:"20%"},{name:"createdAt",title:'<i class="grey clock outline icon"></i>Created at',width:"20%"},{name:"updatedAt",title:'<i class="grey clock outline icon"></i>Updated at',width:"20%"}],sortOrder:[{field:"Name",direction:"asc"}],perPage:10,apiUrl:"http://localhost:3000",basicAuth:"Basic NDAxNTU3Y2YtY2Q1OS00MTBlLTlkNTUtOGJhNzk2OTU1ZjVjOmI3ZmZlYjVmZjBhMTQ0NTNmZTcyNWY4Mjc3NTMyODk3ZTQ0MzdhMTQ="}},methods:{getData(e,t){return this.$http.defaults.baseURL=this.apiUrl+"/v1/city",this.$http.defaults.headers.common["Authorization"]=this.basicAuth,this.$http.get(e,t)},makeQueryParams(e,t,a){const i={sort:e[0].field,order:"asc"===e[0].direction?1:-1,page:t,pageSize:a,_count:1};return this.searchQuery&&this.searchQuery.trim()&&(i.name=this.searchQuery.trim()),i},transformData(e){const t={};t.pagination={total:e._total_items,per_page:e._embedded.cities.length,current_page:e._page,last_page:e._page_count,next_page_url:((e._links||{}).next||{}).href||null,prev_page_url:((e._links||{}).last||{}).href||null,from:1===e._page?1:(e._page-1)*this.perPage,to:1===e._page?e._embedded.cities.length:(e._page-1)*this.perPage+e._embedded.cities.length},t.data=[];for(var a=0;a<e._embedded.cities.length;a++)t.data.push({id:e._embedded.cities[a].id,name:e._embedded.cities[a].name,stateId:e._embedded.cities[a].stateId,stateName:e._embedded.cities[a].stateName||"",createdAt:this.$moment(e._embedded.cities[a].createdAt).format("HH:mm:ss DD/MM/YYYY"),updatedAt:this.$moment(e._embedded.cities[a].updatedAt).format("HH:mm:ss DD/MM/YYYY")});return t},onPaginationData(e){this.$refs.pagination.setPaginationData(e),this.$refs.paginationInfo.setPaginationData(e);const t=this.$refs.vuetable.$data.tableData,a=this.$refs.vuetable,i=t.map(e=>e.stateId);i.length>0&&(this.$http.defaults.baseURL=this.apiUrl,this.$http.defaults.headers.common["Authorization"]=this.basicAuth,this.$http.post("/v1/state/bulk",{ids:i}).then(function(e){const i=[],n=[];e.data.map(e=>n[e._id]=e);for(let a=0;a<t.length;a++)i.push(Object.assign(t[a],{stateName:(n[t[a].stateId]||{}).name||""}));a.$data.tableData=i}).catch(function(e){console.log(e)}))},onChangePage(e){this.$refs.vuetable.changePage(e)}}}),_=y,v=(0,m.A)(_,f,b,!1,null,null,null),T=v.exports;const k="geonames-vue-theme";var A={name:"App",components:{StateTable:g,CityTable:T},data(){return{darkTheme:!1,searchQuery:""}},mounted(){const e=localStorage.getItem(k);null!==e&&(this.darkTheme="dark"===e),this.applyThemeToBody()},updated(){this.applyThemeToBody()},methods:{toggleTheme(){this.darkTheme=!this.darkTheme,localStorage.setItem(k,this.darkTheme?"dark":"light"),this.applyThemeToBody()},applyThemeToBody(){document.body.classList.toggle("theme-dark",this.darkTheme)}}},P=A,N=(0,m.A)(P,n,r,!1,null,null,null),D=N.exports,Q=a(4335);i.Ay.use(a(5624)),i.Ay.prototype.$http=Q.A,i.Ay.config.productionTip=!1,new i.Ay({render:e=>e(D)}).$mount("#app")}},t={};function a(i){var n=t[i];if(void 0!==n)return n.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,i,n,r){if(!i){var s=1/0;for(h=0;h<e.length;h++){i=e[h][0],n=e[h][1],r=e[h][2];for(var o=!0,l=0;l<i.length;l++)(!1&r||s>=r)&&Object.keys(a.O).every(function(e){return a.O[e](i[l])})?i.splice(l--,1):(o=!1,r<s&&(s=r));if(o){e.splice(h--,1);var d=n();void 0!==d&&(t=d)}}return t}r=r||0;for(var h=e.length;h>0&&e[h-1][2]>r;h--)e[h]=e[h-1];e[h]=[i,n,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,i){var n,r,s=i[0],o=i[1],l=i[2],d=0;if(s.some(function(t){return 0!==e[t]})){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(l)var h=l(a)}for(t&&t(i);d<s.length;d++)r=s[d],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(h)},i=self["webpackChunkgeonames_vue"]=self["webpackChunkgeonames_vue"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=a.O(void 0,[504],function(){return a(3266)});i=a.O(i)})();
//# sourceMappingURL=app.3039b495.js.map